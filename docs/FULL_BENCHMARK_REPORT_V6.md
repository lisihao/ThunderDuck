# ThunderDuck V6 全面性能基准测试报告

> **版本**: V6 | **日期**: 2026-01-26 | **平台**: Apple Silicon M4 (UMA)

## 测试环境

| 配置项 | 详情 |
|-------|------|
| 平台 | Apple Silicon M4 |
| 理论带宽 | 400 GB/s |
| CPU | ARM Neon SIMD |
| 预热 | 3 次 |
| 测量 | 5 次 |

---

## Filter 算子

**SQL**: `SELECT * FROM t WHERE val > threshold`

| 数据量 | 选择率 | 版本 | 硬件 | 时间(μs) | 带宽(GB/s) | 吞吐(M/s) | vs v3 | vs DuckDB |
|--------|--------|------|------|----------|------------|-----------|-------|----------|
| 0M | 50% | v2 | CPU SIMD | 52.0 | 7.69 | 1922.46 | 0.72x | 2.44x |
| 0M | 50% | v3 | CPU SIMD | 37.3 | 10.71 | 2677.96 | 1.00x | 3.40x |
| 0M | 50% | v4 (自适应) | AUTO | 37.2 | 10.75 | 2686.97 | 1.00x | 3.41x |
| 0M | 50% | DuckDB | CPU | 127.0 | 3.15 | 787.56 | 0.29x | 1.00x |
| 1M | 50% | v2 | CPU SIMD | 472.8 | 8.46 | 2115.10 | 0.85x | 0.53x |
| 1M | 50% | v3 | CPU SIMD | 402.8 | 9.93 | 2482.72 | 1.00x | 0.62x |
| 1M | 50% | v4 (自适应) | AUTO | 414.2 | 9.66 | 2414.58 | 0.97x | 0.61x |
| 1M | 50% | DuckDB | CPU | 251.0 | 15.94 | 3984.59 | 1.60x | 1.00x |
| 1M | 10% | v2 | CPU SIMD | 313.6 | 12.75 | 3188.52 | 0.58x | 0.91x |
| 1M | 10% | v3 | CPU SIMD | 180.4 | 22.17 | 5543.24 | 1.00x | 1.58x |
| 1M | 10% | v4 (自适应) | AUTO | 155.9 | 25.65 | 6413.35 | 1.16x | 1.83x |
| 1M | 10% | DuckDB | CPU | 285.3 | 14.02 | 3504.47 | 0.63x | 1.00x |
| 1M | 90% | v2 | CPU SIMD | 692.3 | 5.78 | 1444.55 | 0.86x | 0.40x |
| 1M | 90% | v3 | CPU SIMD | 593.7 | 6.74 | 1684.38 | 1.00x | 0.46x |
| 1M | 90% | v4 (自适应) | AUTO | 626.9 | 6.38 | 1595.09 | 0.95x | 0.44x |
| 1M | 90% | DuckDB | CPU | 274.4 | 14.58 | 3643.76 | 2.16x | 1.00x |
| 10M | 50% | v2 | CPU SIMD | 8505.8 | 4.70 | 1175.67 | 0.48x | 0.18x |
| 10M | 50% | v3 | CPU SIMD | 4087.8 | 9.79 | 2446.29 | 1.00x | 0.38x |
| 10M | 50% | v4 (自适应) | AUTO | 4042.5 | 9.89 | 2473.71 | 1.01x | 0.39x |
| 10M | 50% | DuckDB | CPU | 1561.7 | 25.61 | 6403.14 | 2.62x | 1.00x |
| 10M | 10% | v2 | CPU SIMD | 3685.1 | 10.85 | 2713.61 | 0.74x | 0.40x |
| 10M | 10% | v3 | CPU SIMD | 2712.0 | 14.75 | 3687.37 | 1.00x | 0.54x |
| 10M | 10% | v4 (自适应) | AUTO | 2617.4 | 15.28 | 3820.52 | 1.04x | 0.56x |
| 10M | 10% | DuckDB | CPU | 1462.1 | 27.36 | 6839.52 | 1.85x | 1.00x |
| 50M | 50% | v2 | CPU SIMD | 26107.9 | 7.66 | 1915.13 | 0.79x | 0.26x |
| 50M | 50% | v3 | CPU SIMD | 20568.0 | 9.72 | 2430.96 | 1.00x | 0.32x |
| 50M | 50% | v4 (自适应) | AUTO | 20159.3 | 9.92 | 2480.24 | 1.02x | 0.33x |
| 50M | 50% | DuckDB | CPU | 6668.8 | 29.99 | 7497.58 | 3.08x | 1.00x |

## Aggregate 算子

**SQL**: `SELECT SUM(val), MIN(val), MAX(val) FROM t`

| 数据量 | 操作 | 版本 | 硬件 | 时间(μs) | 带宽(GB/s) | vs v3 | vs DuckDB |
|--------|------|------|------|----------|------------|-------|----------|
| 0M | SUM | v2 | CPU SIMD | 4.3 | 93.94 | 1.00x | 63.04x |
| 0M | SUM | v3 | AUTO | 4.2 | 94.12 | 1.00x | 63.16x |
| 0M | SUM | DuckDB | CPU | 268.4 | 1.49 | 0.02x | 1.00x |
| 0M | MINMAX | v2 | CPU SIMD | 3.8 | 105.73 | 1.00x | 44.53x |
| 0M | MINMAX | v3 | AUTO | 3.8 | 105.26 | 1.00x | 44.33x |
| 0M | MINMAX | DuckDB | CPU | 168.5 | 2.37 | 0.02x | 1.00x |
| 1M | SUM | v2 | CPU SIMD | 42.0 | 95.14 | 1.02x | 5.25x |
| 1M | SUM | v3 | AUTO | 42.7 | 93.73 | 1.00x | 5.17x |
| 1M | SUM | DuckDB | CPU | 220.7 | 18.12 | 0.19x | 1.00x |
| 1M | MINMAX | v2 | CPU SIMD | 34.4 | 116.14 | 1.12x | 9.82x |
| 1M | MINMAX | v3 | AUTO | 38.6 | 103.74 | 1.00x | 8.77x |
| 1M | MINMAX | DuckDB | CPU | 338.1 | 11.83 | 0.11x | 1.00x |
| 10M | SUM | v2 | CPU SIMD | 491.5 | 81.38 | 1.00x | 3.29x |
| 10M | SUM | v3 | AUTO | 490.3 | 81.58 | 1.00x | 3.30x |
| 10M | SUM | DuckDB | CPU | 1617.9 | 24.72 | 0.30x | 1.00x |
| 10M | MINMAX | v2 | CPU SIMD | 485.8 | 82.34 | 1.03x | 3.54x |
| 10M | MINMAX | v3 | AUTO | 502.4 | 79.61 | 1.00x | 3.42x |
| 10M | MINMAX | DuckDB | CPU | 1718.7 | 23.27 | 0.29x | 1.00x |
| 50M | SUM | v2 | CPU SIMD | 2828.4 | 70.71 | 1.02x | 2.20x |
| 50M | SUM | v3 | AUTO | 2898.3 | 69.01 | 1.00x | 2.14x |
| 50M | SUM |